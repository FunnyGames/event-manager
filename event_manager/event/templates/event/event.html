{% extends "event/base.html" %}{% load crispy_forms_tags %} 
{% block content %}
{% if cancelled_event %}
<div class="article-metadata" style="color: red !important;">
    <div style="color: red !important; font-weight: bold;">This event is cancelled.</div>
</div>
{% else %}
<h1>{{event.title}}</h1>
<p class="" style="font-size: small;">Event ID: {{ event.id }}</p>
<p class="" style="font-size: larger;">
    <b>Description:</b><br />
    {{ event.description }}
</p>
<p class="article-content">
    <b>Date range:</b> {{ event.start_date }} - {{ event.end_date }}
</p>
<p class="article-content"><b>Capacity:</b> {{ registered_users }} / {{ event.capacity }}</p>
<p class="article-content"><b>Place:</b> {{ event.place }}</p>
<p class="article-content"><b>Rating:</b> {{ ratings_avg.rate__avg }}/5 (by {{ ratings_counts }} users)</p>
{% if user.id %}
    {% if my_rating %}
     <p class="article-content"><b>Rating by me:</b> {{ my_rating.rate }}</p>
     {% else %}
        <form method="POST">
            {% csrf_token %}
            <fieldset class="form-group">
              {{ form }}
            </fieldset>
            <div class="form-group">
              <button class="btn btn-outline-info" type="=submit">Save</button>
            </div>
          </form>
     </p>
     {% endif %}
{% endif %}
<div style="color: black !important; font-weight: bold;">Announcements:</div>
{% if announcements|length > 0 %}
{% for u in announcements %}
{% if u.EventId == event.id %}
<div class="article-metadata" style="color: green !important;"> {{ u.announcement }}
    <span style="color: black !important; font-size: small;">{{ u.create_date }}</span>
</div>
{% endif %}
{% endfor %}
{% else %}
<div class="article-metadata">
    No announcements
</div>
{% endif %}
{% endif %}
{% endblock content %}